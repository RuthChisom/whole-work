# WholeWork — Career Event Data Model

> The Career Event is the atomic unit of a WholeWork passport. It represents any chapter in a person's life — paid work, caregiving, learning, volunteering, or a personal project — with equal dignity.

---

## JSON Schema

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "CareerEvent",
  "description": "A single chapter in a WholeWork career passport",
  "type": "object",
  "required": ["id", "type", "title", "startDate", "visibility", "skills", "createdAt"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier (nanoid, 12 chars)",
      "examples": ["a1b2c3d4e5f6"]
    },
    "type": {
      "type": "string",
      "enum": ["job", "caregiving", "learning", "volunteer", "project", "gap"],
      "description": "The category of life experience"
    },
    "title": {
      "type": "string",
      "maxLength": 120,
      "description": "Human-readable title for this chapter",
      "examples": [
        "Software Engineer at Acme Corp",
        "Primary Caregiver — Two Children",
        "UX Design Certificate — Google",
        "Freelance Web Development"
      ]
    },
    "organization": {
      "type": "string",
      "maxLength": 100,
      "description": "Company, institution, or context. Optional — caregiving has no org.",
      "examples": ["Acme Corp", "Coursera", "Self-directed"]
    },
    "description": {
      "type": "string",
      "maxLength": 500,
      "description": "Brief description. Can be user-written or AI-generated.",
      "examples": [
        "Managed household operations for a family of four, including budgeting, scheduling, vendor negotiations, and crisis response."
      ]
    },
    "startDate": {
      "type": "string",
      "pattern": "^\\d{4}-(0[1-9]|1[0-2])$",
      "description": "Start month in YYYY-MM format",
      "examples": ["2019-03"]
    },
    "endDate": {
      "type": ["string", "null"],
      "pattern": "^\\d{4}-(0[1-9]|1[0-2])$",
      "description": "End month in YYYY-MM format. Null means ongoing/present.",
      "examples": ["2023-06", null]
    },
    "skills": {
      "type": "array",
      "description": "Skills gained or used during this chapter",
      "items": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 60,
            "examples": ["Budget Management", "Crisis Response", "Python", "Team Leadership"]
          },
          "category": {
            "type": "string",
            "enum": ["technical", "leadership", "communication", "operational", "creative", "other"],
            "description": "Broad skill category for grouping in the passport view"
          }
        }
      }
    },
    "visibility": {
      "type": "string",
      "enum": ["public", "private"],
      "default": "public",
      "description": "Public events show on the shared passport. Private events are only visible to the owner."
    },
    "aiGenerated": {
      "type": "boolean",
      "default": false,
      "description": "True if this event's description/skills were generated by AI (so the UI can show an 'AI-generated' badge and allow regeneration)"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of creation"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last edit"
    }
  }
}
```

---

## Example: A Complete Career Passport (array of Career Events)

```json
[
  {
    "id": "evt_k8x2m1",
    "type": "job",
    "title": "Marketing Coordinator",
    "organization": "Bloom Agency",
    "description": "Led social media strategy and client communications for a boutique agency. Managed 3 accounts simultaneously.",
    "startDate": "2016-06",
    "endDate": "2019-02",
    "skills": [
      { "name": "Social Media Strategy", "category": "creative" },
      { "name": "Client Communication", "category": "communication" },
      { "name": "Project Management", "category": "operational" }
    ],
    "visibility": "public",
    "aiGenerated": false,
    "createdAt": "2025-01-15T10:30:00Z",
    "updatedAt": "2025-01-15T10:30:00Z"
  },
  {
    "id": "evt_p3q7r2",
    "type": "caregiving",
    "title": "Primary Caregiver — Two Children",
    "organization": null,
    "description": "Managed household operations for a family of four. Coordinated schedules, budgets ($4K/mo), medical appointments, and educational activities. Led a parent volunteer committee of 12 people.",
    "startDate": "2019-03",
    "endDate": "2023-08",
    "skills": [
      { "name": "Budget Management", "category": "operational" },
      { "name": "Schedule Coordination", "category": "operational" },
      { "name": "Crisis Response", "category": "leadership" },
      { "name": "Stakeholder Management", "category": "communication" },
      { "name": "Team Leadership", "category": "leadership" }
    ],
    "visibility": "public",
    "aiGenerated": true,
    "createdAt": "2025-01-15T10:32:00Z",
    "updatedAt": "2025-01-15T10:35:00Z"
  },
  {
    "id": "evt_w9y4n3",
    "type": "learning",
    "title": "Google UX Design Professional Certificate",
    "organization": "Coursera",
    "description": "Completed 7-course certificate covering user research, wireframing, prototyping, and usability testing.",
    "startDate": "2023-04",
    "endDate": "2023-09",
    "skills": [
      { "name": "User Research", "category": "creative" },
      { "name": "Wireframing", "category": "creative" },
      { "name": "Figma", "category": "technical" }
    ],
    "visibility": "public",
    "aiGenerated": false,
    "createdAt": "2025-01-15T10:36:00Z",
    "updatedAt": "2025-01-15T10:36:00Z"
  },
  {
    "id": "evt_t5v8k4",
    "type": "volunteer",
    "title": "PTA Technology Committee Chair",
    "organization": "Lincoln Elementary",
    "description": "Led the school's digital transition during COVID. Evaluated 5 EdTech vendors, trained 30+ parents on remote learning tools.",
    "startDate": "2020-09",
    "endDate": "2022-06",
    "skills": [
      { "name": "Vendor Evaluation", "category": "operational" },
      { "name": "Training & Onboarding", "category": "communication" },
      { "name": "Technology Assessment", "category": "technical" }
    ],
    "visibility": "private",
    "aiGenerated": false,
    "createdAt": "2025-01-15T10:38:00Z",
    "updatedAt": "2025-01-15T10:38:00Z"
  }
]
```

---

## How This Maps to Aleph Cloud

Each Career Event is stored as a **Post** on Aleph Cloud:

```typescript
// Writing a career event to Aleph
await authClient.createPost({
  postType: 'career-event',
  content: careerEvent,                           // the JSON object above
  channel: 'wholework',
  tags: [
    `passport:${passportSlug}`,                   // link event to passport
    `type:${careerEvent.type}`,                   // queryable by type
    `visibility:${careerEvent.visibility}`,       // filter public vs private
  ],
  sync: true,
});

// Reading all public events for a passport
const response = await client.getPosts({
  types: ['career-event'],
  tags: ['passport:sarah-jones', 'visibility:public'],
  channels: ['wholework'],
});
const events = response.posts.map(p => p.content);
```

The full passport is reconstructed client-side by querying all `career-event` posts for a given passport slug, sorting by `startDate`, and filtering by `visibility`.

---

## Design Decisions & Reasoning

### 1. `type` is a closed enum, not freetext

```
"enum": ["job", "caregiving", "learning", "volunteer", "project", "gap"]
```

**Why:** These six types cover the WholeWork thesis — that life includes caregiving, learning, and projects alongside traditional employment. A closed enum lets us:
- Color-code events on the timeline (blue for jobs, green for caregiving, etc.)
- Filter by type in the UI
- Generate targeted AI descriptions per type
- Keep the questionnaire simple ("select what applies")

**Why `gap` exists:** Some users may want to explicitly acknowledge a gap without categorizing it. This is opt-in and respects user agency.

### 2. Dates are YYYY-MM, not full timestamps

**Why:** Nobody remembers the exact day they started caregiving. Month-level precision matches how people think about career chapters. It also simplifies the questionnaire — a month/year picker instead of a full date picker.

### 3. `endDate` is nullable (means "present/ongoing")

**Why:** Active caregivers, current employees, and in-progress courses all need a way to say "still doing this." `null` is simpler than a magic string like `"present"` — it's a clean conditional in both TypeScript and the UI.

### 4. Skills are embedded in the event, not referenced by ID

```json
"skills": [{ "name": "Budget Management", "category": "operational" }]
```

**Why not a separate skills table with foreign keys?** Because:
- We have no SQL database — Aleph stores JSON documents
- Skills are contextual: "Budget Management" as a caregiver is different from "Budget Management" at a Fortune 500
- The AI generates skills per-event, not globally
- The passport view aggregates skills across events client-side — a simple `flatMap` + dedupe

### 5. `visibility` is per-event, not per-passport

**Why:** A user might share their caregiving and work history publicly but keep a volunteer role private. Per-event visibility gives fine-grained control without a complex permissions system. The public passport page simply filters to `visibility: "public"`.

### 6. `aiGenerated` flag

**Why:** When the AI generates an event description, the user should know what was auto-generated vs. what they wrote. This enables:
- An "AI-generated" badge in the UI
- A "Regenerate" button only on AI content
- Trust transparency — users and viewers know what's human vs. machine

### 7. No `userId` in the event object

**Why:** On Aleph, every Post is already signed by the author's wallet address. The `sender` field on the Aleph message IS the user identity. Adding a redundant `userId` would create a sync problem. The passport slug in the tags (`passport:sarah-jones`) links events to passports.

### 8. Flat structure, no nesting

**Why:** Each event is an independent Aleph Post. This means:
- Events can be created, updated, and deleted individually
- No need to re-upload the entire passport when one event changes
- Queries are simple tag-based filters
- Aleph's `amend` feature lets you update a single event by referencing its original hash
